<?xml version="1.0" encoding="utf-8"?>
<layout xmlns:android="http://schemas.android.com/apk/res/android"
	xmlns:app="http://schemas.android.com/apk/res-auto"
	xmlns:tools="http://schemas.android.com/tools">

	<data>
		<variable
			name="fragment"
			type="com.kulenina.questix.fragment.AllianceListFragment" />
	</data>

	<LinearLayout
		android:layout_width="match_parent"
		android:layout_height="match_parent"
		android:orientation="vertical"
		android:padding="16dp">

		<!-- Scrollable content -->
		<ScrollView
			android:layout_width="match_parent"
			android:layout_height="wrap_content">

			<LinearLayout
				android:layout_width="match_parent"
				android:layout_height="wrap_content"
				android:orientation="vertical">

				<!-- Loading State -->
				<LinearLayout
					android:id="@+id/layout_loading"
					android:layout_width="match_parent"
					android:layout_height="wrap_content"
					android:orientation="vertical"
					android:gravity="center"
					android:padding="32dp">

					<ProgressBar
						android:layout_width="wrap_content"
						android:layout_height="wrap_content"
						android:layout_marginBottom="16dp" />

					<TextView
						android:layout_width="wrap_content"
						android:layout_height="wrap_content"
						android:text="Loading alliance data..."
						android:textSize="16sp" />

				</LinearLayout>

				<!-- No Alliance State -->
				<LinearLayout
					android:id="@+id/layout_no_alliance"
					android:layout_width="match_parent"
					android:layout_height="wrap_content"
					android:orientation="vertical"
					android:gravity="center"
					android:padding="32dp">

					<TextView
						android:layout_width="wrap_content"
						android:layout_height="wrap_content"
						android:text="You are not in an alliance"
						android:textSize="18sp"
						android:textStyle="bold"
						android:layout_marginBottom="16dp" />

					<TextView
						android:layout_width="wrap_content"
						android:layout_height="wrap_content"
						android:text="Create a new alliance or wait for an invitation from a friend"
						android:textAlignment="center"
						android:layout_marginBottom="24dp" />

					<com.google.android.material.button.MaterialButton
						android:id="@+id/button_create_alliance"
						android:layout_width="wrap_content"
						android:layout_height="wrap_content"
						android:text="Create Alliance"
						android:textSize="16sp"
						android:textStyle="bold"
						app:icon="@drawable/ic_create"
						app:iconGravity="textStart"
						app:iconPadding="8dp"
						app:iconTint="@android:color/white"
						android:layout_marginBottom="16dp" />

				</LinearLayout>

				<!-- Alliance Info -->
				<LinearLayout
					android:id="@+id/layout_alliance_info"
					android:layout_width="match_parent"
					android:layout_height="wrap_content"
					android:orientation="vertical"
					android:background="@drawable/card_background"
					android:padding="16dp"
					android:layout_marginBottom="16dp"
					android:elevation="4dp"
					android:layout_marginHorizontal="4dp"
					android:visibility="gone">

					<LinearLayout
						android:layout_width="wrap_content"
						android:layout_height="wrap_content"
						android:orientation="horizontal"
						android:gravity="center_vertical"
						android:layout_marginBottom="8dp">

						<ImageView
							android:layout_width="20dp"
							android:layout_height="20dp"
							android:src="@drawable/ic_group"
							android:layout_marginEnd="8dp"
							app:tint="?attr/colorPrimary" />

						<TextView
							android:layout_width="wrap_content"
							android:layout_height="wrap_content"
							android:text="Your Alliance"
							android:textSize="16sp"
							android:textStyle="bold" />

					</LinearLayout>

					<TextView
						android:id="@+id/text_view_alliance_name"
						android:layout_width="wrap_content"
						android:layout_height="wrap_content"
						android:text="Alliance Name"
						android:textSize="20sp"
						android:textStyle="bold"
						android:layout_marginBottom="4dp" />


					<TextView
						android:id="@+id/text_view_member_count"
						android:layout_width="wrap_content"
						android:layout_height="wrap_content"
						android:text="Members: 0"
						android:textSize="14sp"
						android:layout_marginBottom="4dp" />

					<TextView
						android:id="@+id/text_view_mission_status"
						android:layout_width="wrap_content"
						android:layout_height="wrap_content"
						android:text="No Active Mission"
						android:textSize="14sp"
						android:layout_marginBottom="16dp" />
					<com.google.android.material.button.MaterialButton
						android:id="@+id/button_start_mission"
						android:layout_width="match_parent"
						android:layout_height="wrap_content"
						android:text="Start Special Mission"
						android:layout_marginBottom="8dp"
						android:visibility="gone"
						app:icon="@drawable/ic_sword"
						app:iconGravity="textStart"
						app:iconPadding="8dp"
						app:iconTint="@android:color/white"
						app:cornerRadius="8dp" />

					<com.google.android.material.button.MaterialButton
						android:id="@+id/button_view_mission"
						android:layout_width="match_parent"
						android:layout_height="wrap_content"
						android:text="View Active Mission"
						android:layout_marginBottom="8dp"
						android:visibility="gone"
						style="@style/Widget.Material3.Button.OutlinedButton"
						app:icon="@drawable/ic_eye"
						app:iconGravity="textStart"
						app:iconPadding="8dp"
						app:iconTint="?attr/colorPrimary"
						app:cornerRadius="8dp" />

					<LinearLayout
						android:layout_width="match_parent"
						android:layout_height="wrap_content"
						android:orientation="horizontal"
						android:gravity="center"
						android:layout_marginTop="8dp">


						<com.google.android.material.button.MaterialButton
							android:id="@+id/button_leave_alliance"
							android:layout_width="0dp"
							android:layout_height="wrap_content"
							android:layout_weight="1"
							android:text="Leave Alliance"
							android:layout_marginStart="8dp"
							android:visibility="gone"
							style="@style/Widget.Material3.Button.OutlinedButton" />

					</LinearLayout>

					<com.google.android.material.button.MaterialButton
						android:id="@+id/button_disband_alliance"
						android:layout_width="match_parent"
						android:layout_height="wrap_content"
						android:text="Disband Alliance"
						android:layout_marginTop="8dp"
						android:backgroundTint="@android:color/holo_red_dark"
						android:visibility="gone"
						app:icon="@drawable/ic_close"
						app:iconGravity="textStart"
						app:iconPadding="8dp"
						app:iconTint="@android:color/white"
						app:cornerRadius="8dp" />

				</LinearLayout>

				<!-- Pending Invitations Fragment Container -->
				<FrameLayout
					android:id="@+id/fragment_container_invitations"
					android:layout_width="match_parent"
					android:layout_height="wrap_content"
					android:layout_marginBottom="16dp" />

			</LinearLayout>

		</ScrollView>

		<!-- Alliance Chat Section - Fixed at bottom -->
		<LinearLayout
			android:id="@+id/layout_alliance_chat"
			android:layout_width="match_parent"
			android:layout_height="0dp"
			android:layout_weight="1"
			android:orientation="vertical"
			android:layout_marginTop="8dp"
			android:visibility="gone">

			<!-- Chat Messages - Full width, no card background -->
			<androidx.recyclerview.widget.RecyclerView
				android:id="@+id/recycler_view_messages"
				android:layout_width="match_parent"
				android:layout_height="0dp"
				android:layout_weight="1"
				android:layout_marginTop="8dp"
				android:layout_marginBottom="8dp"
				android:background="@android:color/white"
				android:padding="8dp" />

			<!-- Message Input with card background -->
			<LinearLayout
				android:layout_width="match_parent"
				android:layout_height="wrap_content"
				android:orientation="horizontal"
				android:gravity="center_vertical"
				android:background="@drawable/card_background"
				android:padding="16dp"
				android:layout_marginHorizontal="4dp"
				android:elevation="4dp"
				android:layout_marginBottom="8dp">

				<EditText
					android:id="@+id/edit_text_message"
					android:layout_width="0dp"
					android:layout_height="wrap_content"
					android:layout_weight="1"
					android:hint="Type a message..."
					android:inputType="textMultiLine"
					android:maxLines="3"
					android:background="@android:color/white"
					android:padding="12dp"
					android:layout_marginEnd="8dp" />

				<com.google.android.material.button.MaterialButton
					android:id="@+id/button_send_message"
					android:layout_width="wrap_content"
					android:layout_height="wrap_content"
					android:text="Send"
					android:textSize="14sp"
					app:icon="@drawable/ic_send"
					app:iconGravity="textStart"
					app:iconPadding="8dp"
					app:iconTint="@android:color/white"
					style="@style/Widget.Material3.Button" />

			</LinearLayout>

		</LinearLayout>

	</LinearLayout>

</layout>